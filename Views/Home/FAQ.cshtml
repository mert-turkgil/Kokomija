@using Kokomija.Models.ViewModels
@model FAQViewModel
@inject Kokomija.Services.ILocalizationService L

@{
    ViewData["Title"] = Model.MetaTitle;
}

@section Meta {
    <meta name="description" content="@Model.MetaDescription">
    <meta name="keywords" content="@Model.MetaKeywords">
    <link rel="canonical" href="@Model.CanonicalUrl">
}

<div class="faq-page">
    <div class="container py-5">
        <!-- Page Header -->
        <div class="faq-header text-center mb-5">
            <h1 class="display-4 fw-bold mb-3">@L.GetString(key: "Title", resourceName: "FAQ")</h1>
            <p class="lead faq-subtitle">@L.GetString(key: "Subtitle", resourceName: "FAQ")</p>
        </div>

        <!-- Search Bar -->
        <div class="faq-search mb-5">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="input-group input-group-lg faq-search-box">
                        <span class="input-group-text faq-search-icon">
                            <i class="bi bi-search"></i>
                        </span>
                        <input type="text" 
                               class="form-control faq-search-input" 
                               id="faqSearchInput" 
                               placeholder="@L.GetString(key: "SearchPlaceholder", resourceName: "FAQ")">
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Filter Pills -->
        <div class="faq-categories mb-4">
            <div class="d-flex flex-wrap justify-content-center gap-2">
                <button class="btn btn-outline-primary category-pill active" data-category="all">
                    <i class="bi bi-grid-3x3-gap me-2"></i>@L.GetString(key: "Category_All", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="general">
                    <i class="bi bi-info-circle me-2"></i>@L.GetString(key: "Category_General", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="ordering">
                    <i class="bi bi-cart-check me-2"></i>@L.GetString(key: "Category_Ordering", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="shipping">
                    <i class="bi bi-truck me-2"></i>@L.GetString(key: "Category_Shipping", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="returns">
                    <i class="bi bi-arrow-return-left me-2"></i>@L.GetString(key: "Category_Returns", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="payment">
                    <i class="bi bi-credit-card me-2"></i>@L.GetString(key: "Category_Payment", resourceName: "FAQ")
                </button>
                <button class="btn btn-outline-primary category-pill" data-category="account">
                    <i class="bi bi-person-circle me-2"></i>@L.GetString(key: "Category_Account", resourceName: "FAQ")
                </button>
            </div>
        </div>

        <!-- FAQ Accordion -->
        <div class="faq-content">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="accordion" id="faqAccordion">
                        
                        <!-- General Questions -->
                        <div class="faq-item" data-category="general">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                        @L.GetString(key: "Q1_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq1" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q1_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="general">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                        @L.GetString(key: "Q2_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q2_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ordering Questions -->
                        <div class="faq-item" data-category="ordering">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                        @L.GetString(key: "Q3_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q3_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="ordering">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                        @L.GetString(key: "Q4_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q4_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="ordering">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                        @L.GetString(key: "Q5_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q5_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Shipping Questions -->
                        <div class="faq-item" data-category="shipping">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                                        @L.GetString(key: "Q6_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q6_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="shipping">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                                        @L.GetString(key: "Q7_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q7_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="shipping">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq8">
                                        @L.GetString(key: "Q8_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq8" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q8_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="shipping">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq9">
                                        @L.GetString(key: "Q9_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq9" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q9_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Returns Questions -->
                        <div class="faq-item" data-category="returns">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq10">
                                        @L.GetString(key: "Q10_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq10" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q10_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="returns">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq11">
                                        @L.GetString(key: "Q11_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq11" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q11_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="returns">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq12">
                                        @L.GetString(key: "Q12_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq12" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q12_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="returns">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq13">
                                        @L.GetString(key: "Q13_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq13" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q13_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Payment Questions -->
                        <div class="faq-item" data-category="payment">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq14">
                                        @L.GetString(key: "Q14_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq14" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q14_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="payment">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq15">
                                        @L.GetString(key: "Q15_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq15" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q15_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="payment">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq16">
                                        @L.GetString(key: "Q16_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq16" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q16_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="payment">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq17">
                                        @L.GetString(key: "Q17_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq17" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q17_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Account Questions -->
                        <div class="faq-item" data-category="account">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq18">
                                        @L.GetString(key: "Q18_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq18" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q18_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="account">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq19">
                                        @L.GetString(key: "Q19_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq19" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q19_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="account">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq20">
                                        @L.GetString(key: "Q20_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq20" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q20_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="general">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq21">
                                        @L.GetString(key: "Q21_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq21" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q21_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="faq-item" data-category="general">
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq22">
                                        @L.GetString(key: "Q22_Title", resourceName: "FAQ")
                                    </button>
                                </h2>
                                <div id="faq22" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                    <div class="accordion-body">
                                        @L.GetString(key: "Q22_Answer", resourceName: "FAQ")
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- No Results Message -->
                    <div id="noResults" class="text-center py-5" style="display: none;">
                        <i class="bi bi-search display-1 faq-no-results-icon mb-3"></i>
                        <h3 class="faq-no-results-title">@L.GetString(key: "NoResults", resourceName: "FAQ")</h3>
                        <p class="faq-no-results-text">@L.GetString(key: "NoResults_Text", resourceName: "FAQ")</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Still Need Help Section -->
        <div class="faq-help-section mt-5 pt-5">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <div class="faq-help-card">
                        <i class="bi bi-headset display-4 mb-3 faq-help-icon"></i>
                        <h3 class="mb-3">@L.GetString(key: "NeedHelp_Title", resourceName: "FAQ")</h3>
                        <p class="faq-help-text mb-4">
                            @L.GetString(key: "NeedHelp_Text", resourceName: "FAQ")
                        </p>
                        <a asp-controller="Home" asp-action="Contact" class="btn btn-primary btn-lg">
                            <i class="bi bi-envelope me-2"></i>@L.GetString(key: "ContactSupport", resourceName: "FAQ")
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('faqSearchInput');
            const categoryPills = document.querySelectorAll('.category-pill');
            const faqItems = document.querySelectorAll('.faq-item');
            const noResults = document.getElementById('noResults');
            let activeCategory = 'all';

            // Search functionality
            searchInput.addEventListener('input', function() {
                filterFAQs();
            });

            // Category filter
            categoryPills.forEach(pill => {
                pill.addEventListener('click', function() {
                    categoryPills.forEach(p => p.classList.remove('active'));
                    this.classList.add('active');
                    activeCategory = this.dataset.category;
                    filterFAQs();
                });
            });

            function filterFAQs() {
                const searchTerm = searchInput.value.toLowerCase();
                let visibleCount = 0;

                faqItems.forEach(item => {
                    const category = item.dataset.category;
                    const text = item.textContent.toLowerCase();
                    const matchesSearch = text.includes(searchTerm);
                    const matchesCategory = activeCategory === 'all' || category === activeCategory;

                    if (matchesSearch && matchesCategory) {
                        item.style.display = '';
                        visibleCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                // Show/hide no results message
                if (visibleCount === 0) {
                    noResults.style.display = 'block';
                } else {
                    noResults.style.display = 'none';
                }
            }

            // Smooth scroll to opened accordion
            const accordionButtons = document.querySelectorAll('.accordion-button');
            accordionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    setTimeout(() => {
                        if (!this.classList.contains('collapsed')) {
                            this.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        }
                    }, 350);
                });
            });
        });
    </script>
}

